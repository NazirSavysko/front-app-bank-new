/* ===============================
   ТРАНЗАКЦІЇ — більш комфортна версія
   =============================== */

/* Токени (легко підкрутити кольори/відступи) */
:root {
    --bg-card: rgba(255,255,255,.96);
    --bg-card-dark: rgba(17,24,39,.88);
    --bg-filter: rgba(255,255,255,.92);
    --bg-filter-dark: rgba(31,41,55,.92);

    --text-main: #2d3748;
    --text-subtle: #4a5568;
    --text-muted: #718096;

    --primary-500: #6366f1;
    --primary-600: #4f46e5;
    --primary-700: #4338ca;

    --green-500: #10b981;
    --green-600: #059669;
    --red-500: #ef4444;
    --red-600: #dc2626;

    --border-soft: rgba(0,0,0,.06);
    --shadow-soft: 0 6px 20px rgba(0,0,0,.08);

    --radius: 14px;
    --radius-sm: 10px;

    --pad-card: 1.125rem;
    --pad-filter: 1rem;

    --focus-ring: 0 0 0 3px rgba(99,102,241,.25);
}

/* Контейнер і прокрутка */
.transactions-list {
    min-height: auto;
    width: 100%;
    max-width: 1200px; /* Розширюємо для ПК */
    margin: 0 auto;
}

/* Список карток: скролимо тільки його */
.account-transactions {
    width: 100%;
    max-height: 520px; /* Висота області перегляду */
    overflow-y: auto;
    overflow-x: hidden;
    padding-right: 0.5rem; /* Відступ під скролбар */
    scroll-behavior: smooth;

    /* Дизайн скролбару */
    scrollbar-width: thin;
    scrollbar-color: rgba(100,116,139,.35) transparent;
}
.account-transactions::-webkit-scrollbar { width: 8px; }
.account-transactions::-webkit-scrollbar-thumb {
    background: rgba(100,116,139,.35);
    border-radius: 999px;
    background-clip: padding-box;
    border: 2px solid transparent;
}
.account-transactions:hover::-webkit-scrollbar-thumb { background: rgba(100,116,139,.55); }

/* Панель фільтрів: звичайна, не липка, щоб прокручувалася */
.transactions-filter {
    position: relative;
    z-index: 10;
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1.5rem;
    margin-bottom: 2rem;
    padding: 2rem;
    background: var(--bg-filter);
    border-radius: var(--radius);
    box-shadow: var(--shadow-soft);
    backdrop-filter: blur(4px);
    border: 1px solid var(--border-soft);
}


.filter-group { display: flex; flex-direction: column; gap: .4rem; }
.filter-label {
    font-size: .8rem;
    font-weight: 700;
    color: var(--text-subtle);
    text-transform: uppercase;
    letter-spacing: .4px;
    margin-bottom: .15rem;
}

.transactions-filter select,
.transactions-filter input {
    width: 100%;
    box-sizing: border-box; /* Ensure padding doesn't affect width */
    padding: .7rem .9rem;
    border: 2px solid rgba(102,126,234,.16);
    border-radius: var(--radius-sm);
    font-size: .95rem;
    background: rgba(255,255,255,.9);
    color: var(--text-main);
    transition: border-color .2s, box-shadow .2s, background .2s;
    line-height: 1.2;
}
.transactions-filter select:hover,
.transactions-filter input:hover {
    border-color: rgba(102,126,234,.32);
}
.transactions-filter select:focus,
.transactions-filter input:focus {
    outline: none;
    border-color: var(--primary-600);
    background: #fff;
    box-shadow: var(--focus-ring);
}

/* Хедер списку */
.account-transactions { width: 100%; }
.transactions-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: .75rem;
    padding-bottom: .5rem;
    border-bottom: 1px solid var(--border-soft);
}
.transactions-header h3 {
    margin: 0;
    color: var(--text-main);
    font-size: 1.15rem;
    letter-spacing: .2px;
}

/* Кнопка «Аналітика» — крупніше та комфортніше */
.analytics-button {
    display: inline-flex;
    align-items: center;
    gap: .55rem;
    background: linear-gradient(135deg,var(--primary-600) 0%,var(--primary-700) 100%);
    color: #fff;
    border: 0;
    padding: .62rem 1rem;
    border-radius: 10px;
    font-size: .95rem;
    font-weight: 600;
    cursor: pointer;
    transition: transform .15s ease, box-shadow .15s ease, filter .15s ease;
    box-shadow: 0 2px 10px rgba(79,70,229,.28);
}
.analytics-button:hover {
    transform: translateY(-1px);
    box-shadow: 0 6px 16px rgba(79,70,229,.35);
    filter: brightness(1.02);
}
.analytics-button:active { transform: translateY(0); }
.analytics-button:focus-visible { outline: none; box-shadow: var(--focus-ring); }
.analytics-icon { font-size: 1rem; }

/* Картка транзакції */
.transaction-card {
    background: var(--bg-card);
    border-radius: var(--radius);
    padding: 1.5rem;
    margin-bottom: 1rem;
    box-shadow: var(--shadow-soft);
    backdrop-filter: blur(4px);
    border: 1px solid var(--border-soft);
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
    cursor: pointer;
}

.transaction-card:not(.expanded) .transaction-body,
.transaction-card:not(.expanded) .transaction-footer {
    display: none;
}

.transaction-card:not(.expanded) .transaction-header {
    margin-bottom: 0;
    padding-bottom: 0;
    border-bottom: none;
}

.transaction-card.expanded {
    background: #fff; /* Яскравіше при розгортанні */
    box-shadow: 0 15px 30px rgba(0,0,0,0.15);
    transform: scale(1.01);
    color: var(--text-main); /* Гарантуємо темний текст на білому фоні */
}

/* Примусово фарбуємо текст всередині expanded картки у темний */
.transaction-card.expanded strong,
.transaction-card.expanded span,
.transaction-card.expanded div {
    /* Не чіпаємо кольори статусів і іконок, тільки звичайний текст */
}
.transaction-card.expanded .transaction-body strong {
    color: var(--text-subtle); /* Темно-сірий для заголовків полів */
}
.transaction-card.expanded .transaction-body div {
    color: var(--text-main); /* Основний темний для значень */
}

/* Лівий бордер за напрямом — трохи тонше, але контрастніше */
.transaction-card::before {
    content:'';
    position:absolute;
    top:0; left:0;
    width: 4px; height:100%;
    background: linear-gradient(135deg,#667eea 0%,#764ba2 100%);
}
.transaction-card[data-type="incoming"]::before {
    background: linear-gradient(135deg,var(--green-500) 0%,var(--green-600) 100%);
}
.transaction-card[data-type="outgoing"]::before {
    background: linear-gradient(135deg,var(--red-500) 0%,var(--red-600) 100%);
}

/* Заголовок */
.transaction-header {
    display: flex;
    align-items: center;
    gap: .9rem;
    margin-bottom: .85rem;
    padding-bottom: .6rem;
    border-bottom: 1px solid rgba(0,0,0,.04);
    font-size: 1.05rem;
    font-weight: 700;
    letter-spacing: .2px;
}
.transaction-header .arrow {
    width: 40px; height: 40px;
    border-radius: 50%;
    display:flex; align-items:center; justify-content:center;
    font-size: 1.35rem; font-weight: 800; color: #fff; flex-shrink: 0;
    background: linear-gradient(135deg,#667eea 0%,#764ba2 100%);
    box-shadow: 0 6px 18px rgba(102,126,234,.28);
}
.transaction-card[data-type="incoming"] .arrow {
    background: linear-gradient(135deg,var(--green-500) 0%,var(--green-600) 100%);
    box-shadow: 0 6px 18px rgba(16,185,129,.28);
}
.transaction-card[data-type="outgoing"] .arrow {
    background: linear-gradient(135deg,var(--red-500) 0%,var(--red-600) 100%);
    box-shadow: 0 6px 18px rgba(239,68,68,.28);
}

/* Тіло/підвал */
.transaction-body {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: .75rem 1rem;
    margin-bottom: .75rem;
    font-size: .97rem;
    line-height: 1.35;
}
.transaction-body strong {
    color: var(--text-subtle);
    font-weight: 600;
    display: block;
    margin-bottom: .25rem;
}
.transaction-footer {
    display:flex; justify-content:space-between; align-items:center;
    flex-wrap:wrap; gap:.6rem;
    padding-top:.65rem;
    border-top: 1px solid rgba(0,0,0,.05);
    font-size:.92rem;
    color: var(--text-muted);
}
.transaction-footer .tx-status {
    padding:.35rem .7rem;
    border-radius: 999px;
    background: rgba(99,102,241,.08);
    color: var(--primary-600);
    font-weight: 700;
    font-size: .78rem;
    letter-spacing: .3px;
}

/* Статуси */
.status {
    padding:.35rem .8rem;
    border-radius: 999px;
    font-size:.78rem;
    font-weight:700;
    text-transform:uppercase;
    letter-spacing:.5px;
}
.status.complete {
    background: rgba(16,185,129,.12);
    color: var(--green-600);
    border: 1px solid rgba(16,185,129,.25);
}
.status.cancelled {
    background: rgba(239,68,68,.12);
    color: var(--red-600);
    border: 1px solid rgba(239,68,68,.25);
}

/* Індикатор розгортання */
.transaction-card {
    background: var(--bg-card);
    border-radius: var(--radius);
    padding: 1.5rem;
    margin-bottom: 1rem;
    box-shadow: var(--shadow-soft);
    backdrop-filter: blur(4px);
    border: 1px solid var(--border-soft);
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
    cursor: pointer;
}

.transaction-card:not(.expanded) .transaction-body,
.transaction-card:not(.expanded) .transaction-footer {
    display: none;
}

.transaction-card:not(.expanded) .transaction-header {
    margin-bottom: 0;
    padding-bottom: 0;
    border-bottom: none;
}

.transaction-card.expanded {
    background: #ffffff !important; /* Force white background for visibility */
    box-shadow: 0 15px 30px rgba(0,0,0,0.15);
    transform: scale(1.01);
    z-index: 5;
    color: #2d3748 !important; /* Force dark text */
}

/* Ensure text colors inside expanded card are dark */
.transaction-card.expanded .transaction-body strong {
    color: #4a5568 !important;
}
.transaction-card.expanded .transaction-body div {
    color: #2d3748 !important;
}


.transaction-card::after {
    content:'▼';
    position: absolute;
    top: 1.8rem;
    right: 1.5rem;
    color: var(--text-muted);
    font-size: 1rem;
    transition: transform .3s ease, color .3s ease;
}
.transaction-card.expanded::after {
    transform: rotate(180deg);
    color: var(--primary-600);
}

/* Окремий контейнер для заголовку/аналітики */
.transactions-top-bar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2rem;
    flex-wrap: wrap;
    gap: 1rem;
}

.section-title-internal {
    font-size: 1.1rem;
    font-weight: 700;
    color: #2d3748;
    margin: 0;
}

.section-headline {
    /* deprecated, using history-headline */
}

.history-headline {
    font-size: 1.1rem;
    font-weight: 700;
    color: #2d3748;
    margin-top: 2rem;
    margin-bottom: 1rem;
    text-transform: none; /* Make it look like "Транзакції" title if desired, or keep standard */
}

/* Немає транзакцій */
.account-transactions p {
    text-align:center;
    padding: 1.6rem;
    color: var(--text-muted);
    font-size: 1rem;
    font-style: italic;
    background: rgba(255,255,255,.8);
    border-radius: var(--radius);
    margin: 1rem 0;
    border: 1px dashed var(--border-soft);
}

/* Адаптив */
@media (max-width: 820px) {
    .transactions-list { max-width: 100%; padding: 0 .5rem; }
    .transactions-filter {
        padding: 1rem;
        gap: 1rem;
        grid-template-columns: 1fr 1fr; /* 2 колонки на планшетах */
    }
    .transactions-header h3 { font-size: 1.02rem; }
    .transaction-card { padding: 1rem; }
    .transaction-header { font-size: 1rem; gap: .7rem; }
    .transaction-header .arrow { width: 36px; height: 36px; font-size: 1.2rem; }
}
@media (max-width: 480px) {
    .analytics-button { padding: .55rem .85rem; }
    .transactions-filter {
        padding: 1rem;
        grid-template-columns: 1fr; /* 1 колонка на телефонах */
        gap: 1rem;
    }
    .transaction-body { grid-template-columns: 1fr; }
}

/* Зменшення руху для чутливих користувачів */
@media (prefers-reduced-motion: reduce) {
    .transaction-card, .analytics-button, .transaction-card::after {
        transition: none !important;
    }
    .transactions-list { scroll-behavior: auto; }
}

/* Темна тема */
@media (prefers-color-scheme: dark) {
    :root {
        --border-soft: rgba(255,255,255,.08);
        --shadow-soft: 0 8px 24px rgba(0,0,0,.35);
        --text-main: #e5e7eb;
        --text-subtle: #d1d5db;
        --text-muted: #9ca3af;
    }
    .transactions-filter,
    .transaction-card { background: var(--bg-card-dark); border-color: var(--border-soft); }
    .filter-label,
    .transactions-header h3,
    .transaction-body strong { color: var(--text-main); }
    .transactions-filter select,
    .transactions-filter input {
        background: var(--bg-filter-dark);
        color: var(--text-main);
        border-color: rgba(99,102,241,.25);
    }
    .transactions-filter select:focus,
    .transactions-filter input:focus {
        background: rgba(31,41,55,.96);
        border-color: #818cf8;
        box-shadow: 0 0 0 3px rgba(129,140,248,.25);
    }
    .transactions-header { border-bottom-color: var(--border-soft); }
    .transaction-header { border-bottom-color: var(--border-soft); }
    .transaction-footer { border-top-color: var(--border-soft); }
    .account-transactions p { background: rgba(31,41,55,.85); color: var(--text-muted); border-color: var(--border-soft); }
}
